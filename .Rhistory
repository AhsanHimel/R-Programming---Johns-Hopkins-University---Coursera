filescount <- length(dir(directory))
filescount
}
complete(specdata)
results <- data.frame(file_name=character(0),
no_of_complete_obs=numeric(0))
results
results <- c(12,48)
results
complete <- function(directory,id=1:332){
output <- data.frame(id=numeric(0),
obs=numeric(0))
for(i in 1:id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
data <- read.csv(filedir)
data <- complete.cases(data)
rbind(output, data.frame(file_name=id,
no_of_complete_obs=length(data)))
}
return(output)
}
complete(specdata)
complete <- function(directory,id=1:332){
output <- data.frame(id=numeric(0),
obs=numeric(0))
for(i in 1:id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
data <- read.csv(filedir)
data <- complete.cases(data)
rbind(output, data.frame(file_name=id,
no_of_complete_obs=length(data)))
}
return(output)
}
complete("specdata")
pollutantmean <- function(directory, pollutant, id=1:332){
# directory <- as.character(substitute(directory))
# pollutant <- as.character(substitute(pollutant))
# These are optional. In case someone inputs without quotation mark
vals <- c()
for (filename in id){
filedir <- paste0(directory,"/", sprintf("%03d",filename),".csv")
data <- read.csv(filedir)[pollutant]
vals <- c(vals, data[!is.na(data)])
}
return(mean(vals))
}
pollutantmean("specdata","sulfate")
pollutantmean("specdata","nitrate")
df <- read.csv("specdata\001.csv")
df <- read.csv(".\specdata\001.csv") %>%
df <- read.csv(".\specdata\001.csv")
df <- read.csv("..\specdata\001.csv")
df <- read.csv("...\specdata\001.csv")
df <- read.csv("specdata/001.csv")
complete.cases(df)
complete.cases(df) %>% which()
complete.cases(df) %>% which() %>% length()
complete <- function(directory,id=1:332){
output <- data.frame(id=numeric(0),
obs=numeric(0))
for(i in 1:id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
rbind(output, data.frame(file_name=id,
no_of_complete_obs=length(which(complete.cases(df)))))
}
return(output)
}
complete("specdata")
complete <- function(directory,id=1:332){
output <- data.frame(id=numeric(0),
obs=numeric(0))
for(i in 1:id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
rbind(output, data.frame(id=id,
obs=length(which(complete.cases(df)))))
}
return(output)
}
complete("specdata")
length(which(complete.cases(df)))
complete <- function(directory,id=1:332){
output <- data.frame(id=numeric(0),
obs=numeric(0))
for(i in 1:id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
rbind(output, data.frame(id=i,
obs=length(which(complete.cases(df)))))
}
return(output)
}
complete("specdata")
df <- read.csv("specdata/002.csv")
complete.cases(df) %>% which() %>% length()
length(df)
nrow(df)
complete.cases(df) %>% which() %>% length()
complete <- function(directory, id = 1:332){
## 'director' is a character vector of length 1 indicating
## the location of the CSV files
## 'id' is an integer vector indicating the monitor ID numbers
## to be used
## Return a data frame of the from:
## id nobs
## 1  117
## 2  1041
## ...
## where 'id' is the monitor ID number and 'nobs' is the
## number of complete cases
results <- data.frame(id=numeric(0), nobs=numeric(0))
for(monitor in id){
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- monitor_data[(!is.na(monitor_data$sulfate)), ]
interested_data <- interested_data[(!is.na(interested_data$nitrate)), ]
nobs <- nrow(interested_data)
results <- rbind(results, data.frame(id=monitor, nobs=nobs))
}
results
}
complete("specdata")
complete("specdata",1:5)
complete.cases(df) %>% which() %>% length()
complete <- function(directory,id=1:332){
output <- data.frame(id=numeric(0),
obs=numeric(0))
for(i in 1:id){
# filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
# df <- read.csv(filedir)
# rbind(output, data.frame(id=i,
#                          obs=length(which(complete.cases(df)))))
print(i)
}
return(output)
}
complete("specdata",1:5)
complete <- function(directory,id=1:332){
output <- data.frame(id=numeric(0),
obs=numeric(0))
for(i in 1:id){
# filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
# df <- read.csv(filedir)
# rbind(output, data.frame(id=i,
#                          obs=length(which(complete.cases(df)))))
print(i)
}
output
}
complete("specdata",1:5)
complete <- function(directory,id=c(1:332)){
output <- data.frame(id=numeric(0),
obs=numeric(0))
for(i in 1:id){
# filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
# df <- read.csv(filedir)
# rbind(output, data.frame(id=i,
#                          obs=length(which(complete.cases(df)))))
print(i)
}
output
}
complete("specdata",1:5)
complete <- function(directory,id=c(1:332)){
output <- data.frame(id=numeric(0),
nobs=numeric(0))
for(i in 1:id){
# filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
# df <- read.csv(filedir)
# rbind(output, data.frame(id=i,
#                          nobs=length(which(complete.cases(df)))))
print(i)
}
output
}
complete("specdata",1:5)
complete <- function(directory, id = 1:332){
output <- data.frame(id=numeric(0),
nobs=numeric(0))
for(i in id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
rbind(output, data.frame(id=i,
nobs=length(which(complete.cases(df)))))
}
return(output)
}
complete("specdata",1:5)
complete("specdata",1:5)
complete("specdata")
complete <- function(directory, id = 1:332){
results <- data.frame(id=numeric(0), nobs=numeric(0))
for(monitor in id){
path <- paste(getwd(), "/", directory, "/", sprintf("%03d", monitor), ".csv", sep = "")
monitor_data <- read.csv(path)
interested_data <- monitor_data[(!is.na(monitor_data$sulfate)), ]
interested_data <- interested_data[(!is.na(interested_data$nitrate)), ]
nobs <- nrow(interested_data)
results <- rbind(results, data.frame(id=monitor, nobs=nobs))
}
return(results)
}
complete("specdata",1:5)
complete <- function(directory, id = 1:332){
output <- data.frame(id=numeric(0),
nobs=numeric(0))
for(i in id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
output <- rbind(output,
data.frame(id=i,
nobs=length(which(complete.cases(df)))))
}
return(output)
}
complete("specdata",1:5)
corr <- function(directory, threshold=0){
complete_df <- complete(directory)
thres_df <- complete_df[complete_df$nobs > threshold, ]
thres_id <- thres_df$id
for (i in thres_id){
# filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
print(complete_df[i,])
}
}
corr("specdata",1000)
complete <- function(directory, id = 1:332){
output <- data.frame(id=numeric(0),
nobs=numeric(0))
for(i in id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
output <- rbind(output,
data.frame(id=i,
nobs=length(which(complete.cases(df)))))
}
return(output)
}
corr <- function(directory, threshold=0){
complete_df <- complete(directory)
thres_df <- complete_df[complete_df$nobs > threshold, ]
thres_id <- thres_df$id
for (i in thres_id){
# filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
print(complete_df[i,])
}
}
corr("specdata",1000)
corr <- function(directory, threshold=0){
complete_df <- complete(directory)
thres_df <- complete_df[complete_df$nobs > threshold, ]
thres_id <- thres_df$id
for (i in thres_id){
# filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
complete_df[i,]
}
}
corr("specdata",1000)
numeric(0)
numeric(3)
corr <- function(directory, threshold=0){
complete_df <- complete(directory)
thres_df <- complete_df[complete_df$nobs > threshold, ]
thres_id <- thres_df$id
corr_vector <- numeric(0)
for (i in thres_id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- complete.cases(read.csv(filedir))
corr_vector <- c(corr_vector,
corr(df["sulfate"],df["nitrate"]))
}
corr_vector
}
corr("specdata",1000)
complete <- function(directory, id = 1:332){
output <- data.frame(id=numeric(0),
nobs=numeric(0))
for(i in id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
output <- rbind(output,
data.frame(id=i,
nobs=length(which(complete.cases(df)))))
}
return(output)
}
complete("specdata")
complete("specdata",1:10)
directory <- "specdata"
paste0(directory,"/", sprintf("%03d",i),".csv")
paste0(directory,"/", sprintf("%03d",2),".csv")
filedir <- paste0(directory,"/", sprintf("%03d",2),".csv")
df <- complete.cases(read.csv(filedir))
corr <- function(directory, threshold=0){
complete_df <- complete(directory)
thres_df <- complete_df[complete_df$nobs > threshold, ]
thres_id <- thres_df$id
corr_vector <- numeric(0)
for (i in thres_id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- df[complete.cases(read.csv(filedir))]
corr_vector <- c(corr_vector,
corr(df["sulfate"],df["nitrate"]))
}
corr_vector
}
corr("specdata",1000)
df <- complete.cases(read.csv(filedir))
df
df <- df[complete.cases(read.csv(filedir))]
df
df <- df[complete.cases(read.csv(filedir)),]
filedir <- paste0(directory,"/", sprintf("%03d",2),".csv")
file <- read.csv(filedir)
complete <- file[complete.cases(file),]
cor(complete$sulfate, complete$nitrate)
corr <- function(directory, threshold=0){
complete_df <- complete(directory)
thres_df <- complete_df[complete_df$nobs > threshold, ]
thres_id <- thres_df$id
corr_vector <- numeric(0)
for (i in thres_id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
file <- read.csv(filedir)
complete_rows <- complete.cases(file)
df <- file[complete_rows,]
corr_vector <- c(corr_vector,
corr(df["sulfate"],df["nitrate"]))
}
corr_vector
}
corr("specdata",1000)
complete <- function(directory, id = 1:332){
output <- data.frame(id=numeric(0),
nobs=numeric(0))
for(i in id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
output <- rbind(output,
data.frame(id=i,
nobs=length(which(complete.cases(df)))))
}
return(output)
}
corr("specdata",1000)
directory<- "specdata"
directory<- "specdata"
complete <- complete(directory)
complete
complete_dfs <- complete[complete$nobs > threshold, ]
threshold <- 900
complete <- complete(directory)
complete <- function(directory, id = 1:332){
output <- data.frame(id=numeric(0),
nobs=numeric(0))
for(i in id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
df <- read.csv(filedir)
output <- rbind(output,
data.frame(id=i,
nobs=length(which(complete.cases(df)))))
}
return(output)
}
complete_dfs <- complete[complete$nobs > threshold, ]
comp <- complete(directory)
complete_dfs <- comp[comp$nobs > threshold, ]
complete_dfs
directory<- "specdata"
threshold <- 900
comp <- complete(directory)
complete_dfs <- comp[comp$nobs > threshold, ]
for(i in complete_dfs$id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
file <- read.csv(filedir)
complete_rows <- complete.cases(file)
obs <- file[complete_rows,]
print(obs)
}
for(i in complete_dfs$id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
file <- read.csv(filedir)
complete_rows <- complete.cases(file)
obs <- file[complete_rows,]
corr <- c(corr,
cor(obs$sulfate, obs$nitrate))
}
corr
corr <- numeric(0)
for(i in complete_dfs$id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
file <- read.csv(filedir)
complete_rows <- complete.cases(file)
obs <- file[complete_rows,]
corr <- c(corr,
cor(obs$sulfate, obs$nitrate))
}
corr
corr("specdata",1000)
corr <- function(directory, threshold=0){
comp <- complete(directory)
complete_dfs <- comp[comp$nobs > threshold, ]
corr <- numeric(0)
for(i in complete_dfs$id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
file <- read.csv(filedir)
complete_rows <- complete.cases(file)
obs <- file[complete_rows,]
corr <- c(corr,
cor(obs$sulfate, obs$nitrate))
}
corr
}
corr <- function(directory, threshold=0){
comp <- complete(directory)
complete_dfs <- comp[comp$nobs > threshold, ]
corrs <- numeric(0)
for(i in complete_dfs$id){
filedir <- paste0(directory,"/", sprintf("%03d",i),".csv")
file <- read.csv(filedir)
complete_rows <- complete.cases(file)
obs <- file[complete_rows,]
corrs <- c(corrs,
cor(obs$sulfate, obs$nitrate))
}
corrs
}
corr("specdata",1000)
df <- read.csv("data/hw1_data.csv",header=T)
ls("specdata")
ls("specdata/")
ls(dir("specdata/"))
ls(dir("specdata"))
dir("specdata")
any("csv" == dir("specdata"))
any("330.csv" == dir("specdata"))
any("^csv" == dir("specdata"))
any("csv" %in% dir("specdata"))
any("csv" in dir("specdata"))
any("csv" %in% dir("specdata"))
dir("specdata")
"%in%" <- function(x, table) match(x, table, nomatch = 0) > 0
any("csv" %in% dir("specdata"))
grep("csv",dir("specdata"))
grep(".csv",dir("specdata"))
grep(".csv",dir("specdata"))
data <-mapply(read.csv, paste0(directory,"/",
sprintf("%03d",1:grep(".csv",dir("specdata"))),".csv"))
data <-mapply(read.csv, paste0("specdata/",
sprintf("%03d",1:grep(".csv",dir("specdata"))),".csv"))
data <-mapply(read.csv, paste0("specdata/",
sprintf("%03d",grep(".csv",dir("specdata"))),".csv"))
data
View(data)
data[[1]]
data[[2]]
data[[3]]
data[[4]]
# Qn 1
library(datasets)
data(iris)
Vstr(iris)
str(iris)
iris[,"Species"=="virginica"]
iris[,Species=="virginica"]
iris[,iris$Species=="virginica"]
iris[iris$Species=="virginica",]
mean(iris[iris$Species=="virginica",] )
iris[iris$Species=="virginica",]
colMeans(iris[iris$Species=="virginica",] )
colMeans(iris[iris$Species=="virginica",],)
rowMeans(iris[iris$Species=="virginica",],)
rowMeans(iris[iris$Species=="virginica",])
iris[iris$Species=="virginica",]
summary(iris[iris$Species=="virginica",])
virginica <- subset(iris, Species == "virginica")
summary(virginica)
virginica <- subset(iris, Species == "virginica")
summary(virginica)
summary(iris[iris$Species=="virginica",])
apply(iris[, 1:4], 2, mean)
data(mtcars)
str(mtcars)
sapply(split(mtcars$mpg, mtcars$cyl), mean)
sapply(mtcars, cyl, mean)
with(mtcars, tapply(mpg, cyl, mean))
lapply(mtcars, mean)
mean(mtcars$mpg, mtcars$cyl)
tapply(mtcars$cyl, mtcars$mpg, mean)
sapply(split(mtcars$mpg, mtcars$cyl), mean)
apply(mtcars, 2, mean)
tapply(mtcars$mpg, mtcars$cyl, mean)
split(mtcars, mtcars$cyl)
tapply(mtcars$mpg, mtcars$cyl, mean)
sapply(split(mtcars$mpg, mtcars$cyl), mean)
with(mtcars, tapply(mpg, cyl, mean))
abs(mean(split(mtcars, mtcars$cyl)$'4'$hp) - mean(split(mtcars, mtcars$cyl)$'8'$hp))
abs(mean(mtcars$hp[mtcars$cyl==4])-mean(mtcars$hp[mtcars$cyl==8]))
mean(mtcars$hp[mtcars$cyl==4]) - mean(mtcars$hp[mtcars$cyl==8]))
mean(mtcars$hp[mtcars$cyl==4]) - mean(mtcars$hp[mtcars$cyl==8])
(mean(mtcars$hp[mtcars$cyl==4]) - mean(mtcars$hp[mtcars$cyl==8]))
(mean(mtcars$hp[mtcars$cyl==4]) - mean(mtcars$hp[mtcars$cyl==8])) %>%
abs()
library(dplyr)
(mean(mtcars$hp[mtcars$cyl==4]) - mean(mtcars$hp[mtcars$cyl==8])) %>% abs()
(mean(mtcars$hp[mtcars$cyl==4]) - mean(mtcars$hp[mtcars$cyl==8])) %>% abs()
debug(ls)
ls()
help
debugonce()
